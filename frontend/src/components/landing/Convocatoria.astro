---
export interface Props {
  title?: string;
  description?: string;
  startDate?: string;
  endDate?: string;
  documentUrl?: string;
}

const { 
  title = 'Convocatoria', 
  description = '', 
  startDate, 
  endDate, 
  documentUrl 
} = Astro.props;

const formatD = (dStr?: string) => {
  if (!dStr) return '';
  const d = new Date(dStr);
  return d.toLocaleDateString('es-MX', { year: 'numeric', month: 'long', day: 'numeric' });
};
---
<section class="convocatoria-section">
  <div class="container">
    <div class="convocatoria-card">
      <div class="convo-icon">
        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg>
      </div>
      <div class="convo-content">
        <h2>{title}</h2>
        <p>{description}</p>
        <div class="convo-dates">
          {startDate && <span><small>Inicio:</small> <strong>{formatD(startDate)}</strong></span>}
          {endDate && <span><small>Cierre:</small> <strong>{formatD(endDate)}</strong></span>}
        </div>
      </div>
      {documentUrl && (
        <div class="convo-action">
          <a href={documentUrl} target="_blank" rel="noopener noreferrer" class="btn btn-secondary">
            Ver Documento
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-left:0.5rem;"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg>
          </a>
        </div>
      )}
    </div>
  </div>
</section>

<style>
  .convocatoria-section {
    padding: 4rem 0;
    background: var(--color-bg-light, #f8fafc);
  }
  .convocatoria-card {
    background: white;
    border-radius: 1.5rem;
    padding: 3rem;
    display: flex;
    align-items: center;
    gap: 2rem;
    box-shadow: 0 10px 25px -5px rgba(0,0,0,0.05);
    border-left: 6px solid var(--color-secondary, #eab308);
  }
  .convo-icon {
    background: rgba(234, 179, 8, 0.1);
    color: var(--color-secondary, #eab308);
    width: 80px;
    height: 80px;
    min-width: 80px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .convo-content {
    flex: 1;
  }
  .convo-content h2 {
    font-size: 1.8rem;
    color: var(--color-primary, #8b1538);
    margin-bottom: 0.75rem;
  }
  .convo-content p {
    color: var(--text-muted, #475569);
    line-height: 1.6;
    margin-bottom: 1.5rem;
  }
  .convo-dates {
    display: flex;
    gap: 2rem;
    background: #f1f5f9;
    padding: 1rem 1.5rem;
    border-radius: 0.75rem;
    display: inline-flex;
  }
  .convo-dates span {
    display: flex;
    flex-direction: column;
    font-size: 0.9rem;
    color: #334155;
  }
  .convo-dates small {
    color: #64748b;
    font-size: 0.75rem;
    text-transform: uppercase;
    font-weight: 700;
  }
  .convo-action {
    display: flex;
    align-items: center;
  }
  @media (max-width: 768px) {
    .convocatoria-card {
      flex-direction: column;
      text-align: center;
      gap: 1.5rem;
    }
    .convo-dates {
      margin: 0 auto;
      justify-content: center;
    }
  }
</style>
